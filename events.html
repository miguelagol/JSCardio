<!-- // Events -->
<!--  Here’s a list of the most useful DOM events, just to take a look at:
      Mouse events:
         - click – when the mouse clicks on an element (touchscreen devices generate it on a tap).
         - contextmenu – when the mouse right-clicks on an element.
         - mouseover / mouseout – when the mouse cursor comes over / leaves an element.
         - mousedown / mouseup – when the mouse button is pressed / released over an element.
         - mousemove – when the mouse is moved.
      Form element events:
         - submit – when the visitor submits a <form>.
         - focus – when the visitor focuses on an element, e.g. on an <input>.
      Keyboard events:
         - keydown and keyup – when the visitor presses and then releases the button.
      Document events
         - DOMContentLoaded – when the HTML is loaded and processed, DOM is fully built.
      CSS events:
         - transitionend – when a CSS-animation finishes.
-->

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!--  Event handlers
      To react on events we can assign a handler – a function that runs in case of an event. -->

<!-- Ways to assign a handler -->

<!-- HTML-attribute -->
<!-- A handler can be set in HTML with an attribute named on<event> -->

<script>
   function eventHandler() {
      alert(
         'HTML + JS (HTML-attribute) \n <input onlick="eventHandler()" type="button" value="HTML + JS (HTML-attribute)"> \n <script> function eventHandler() { alert() } <//script>',
      );
   }
</script>

<!-- To assign a click handler for an input, we can use onclick -->
<input
   class="wider"
   type="button"
   onclick="eventHandler()"
   value="HTML + JS (HTML-attribute)"
/>

<!-- The handler is always in the DOM property: the HTML-attribute is just one of the ways to initialize it. -->

<!--------------------------------------------------------------------------------------------------->

<!-- DOM property -->
<!-- We can assign a handler using a DOM property on<event>. -->
<input
   id="element"
   type="button"
   class="wider"
   value="HTML + JS (DOM-property)"
/>

<script>
   element.onclick = function() {
      alert(
         'HTML + JS (DOM-property) \n <input id="element" type="button" value="HTML + JS (DOM-property)"> \n <script> element.onclick = function () { alert() } <//script>',
      );
   };
</script>

<!-- the same as -->
<input
   type="button"
   value="Only HTML"
   class="wider"
   onclick="alert(`Only HTML \n <input type='button' value='Only HTML' onclick='alert()'>`)"
/>

<!-- DOM-property case matters!
      Assign a handler to elem.onclick, not elem.ONCLICK, because DOM properties are case-sensitive. -->

<br />
<br />

<!--------------------------------------------------------------------------------------------------->

<!-- As there’s only one onclick property, we can’t assign more than one event handler. -->
<input
   type="button"
   id="elem"
   class="wider"
   onclick="alert('Only HTML')"
   value="Click me"
/>
<script>
   elem.onclick = function() {
      alert('HTML + JS');
   };

   // The same as
   /*
   function alertSth() {
      alert('HTML + JS');
   }
   
   elem.onclick = alertSth;    // The function should be assigned as alertSth, not alertSth()!!!
   */
</script>

<!--------------------------------------------------------------------------------------------------->

<!-- Accessing the element: this -->
<!-- The value of this inside a handler is the element. The one which has the handler on it. -->
<button onclick="alert(this.innerHTML)">
   Alert Inner HTML by this.innerHTML
</button>

<!--------------------------------------------------------------------------------------------------->

<!-- Don’t use setAttribute for handlers!!!

   Such a call won’t work:
      document.body.setAttribute('onclick', function() { alert(1) });

   a click on <body> will generate errors,
   because attributes are always strings, function becomes a string -->

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- addEventListener -->
<!--  element.addEventListener(event, handler[ , phase])
         event -  Event name, e.g. "click".
         handler  - The handler function.
         phase -  An optional argument, the “phase” for the handler to work.
      
      To remove, exactly the same arguments as addEventListener
         element.removeEventListener(event, handler[, phase]);
      
      -------------------REMEMBER-------------------
      Removal requirwe the same function
-->
<script>
   /* // that doesn't work
   elemen.addEventListener('click', () => alert('thanks'));
   // ...
   elemen.removeEventListener('click', () => alert('thanks')); */

   // The handler won’t be removed, because removeEventListener gets another function – with the same code

   // The right way
   function handler() {
      alert('thanks');
   }
   elem.addEventListener('click', handler);
   // ...
   elem.removeEventListener('click', handler);
</script>

<!-- Multiple calls to addEventListener allow to add multiple handlers -->
<input
   id="eleme"
   type="button"
   class="wider"
   value="Multiple calls to addEventListener"
/>
<script>
   function handler1() {
      alert('handler 1');
   }
   function handler2() {
      alert('handler 2');
   }

   eleme.onclick = () => alert('element.onclick');
   eleme.addEventListener('click', handler1);
   eleme.addEventListener('click', handler2);
</script>

<style>
   input {
      transition: width 1s;
      width: 100px;
   }

   .wider {
      width: auto;
   }

   .wide {
      width: 300px;
   }
</style>

<!-- There exist events that can’t be assigned via a DOM-property. Must use addEventListener. For instance, the event transitionend -->
<input
   type="button"
   id="trans"
   onclick="this.classList.toggle('wide')"
   value="Click me"
/>

<script>
   trans.ontransitionend = function() {
      alert('DOM property'); // doesn't work
   };

   trans.addEventListener('transitionend', function() {
      alert('transitionend with addEventListener'); // shows up when the animation finishes
   });
</script>
<br />
<br />

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- Event object -->
<!-- When an event happens, the browser creates an event object, puts details into it and passes it as an argument to the handler. -->

<input
   type="button"
   value="Show event type, element and coordinates of the click"
   id="eventObject"
   class="wider"
/>

<!--  event.currentTarget   - Element that handled the event. That’s exactly the same as this, unless you bind this to something else
      event.clientX / event.clientY    - Window-relative coordinates of the cursor, for mouse events.-->
<script>
   eventObject.onclick = function(event) {
      // show event type, element and coordinates of the click
      alert(event.type + ' at ' + event.currentTarget);
      alert('Coordinates: ' + event.clientX + ':' + event.clientY);
   };
</script>

<!--------------------------------------------------------------------------------------------------->

<!-- Object handlers: handleEvent -->
<!-- We can assign an object as an event handler using addEventListener. When an event occurs, its handleEvent method is called with it. -->
<button id="handleEvents">Handle Event</button>

<script>
   handleEvents.addEventListener('click', {
      handleEvent(event) {
         alert(event.type + ' at ' + event.currentTarget);
      },
   });
</script>

<button id="handleMouse">Handle mouse event witch switch</button>

<script>
   class Menu {
      handleEvent(event) {
         switch (event.type) {
            case 'mousedown':
               handleMouse.innerHTML = 'Mouse button pressed';
               break;
            case 'mouseup':
               handleMouse.innerHTML += '... and released';
               break;
         }
      }
   }

   let menu = new Menu();
   handleMouse.addEventListener('mousedown', menu);
   handleMouse.addEventListener('mouseup', menu);
</script>

<!-- the same as -->
<button id="handleMouse2">Handle mouse event</button>

<script>
   class Menu2 {
      handleEvent(event) {
         let eventType =
            'on' + event.type[0].toUpperCase() + event.type.slice(1);
         this[eventType](event);
      }
      onMousedown() {
         handleMouse2.innerHTML = 'Mouse button pressed';
      }
      onMouseup() {
         handleMouse2.innerHTML += '... and released';
      }
   }
   let menu2 = new Menu2();
   handleMouse2.addEventListener('mousedown', menu2);
   handleMouse2.addEventListener('mouseup', menu2);
</script>
<br />
<br />

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 1 - Hide on click -->
<button id="hider">Click to hide the text</button>
<div id="text">
   Text
</div>

<script>
   hider.onclick = function() {
      text.style.display = 'none'
   }
</script>
<br>
<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 2 - Hide self -->
<button id="hideSelf" onclick='hideSelf.style.display = "none"'>Hide the button</button>

<!-- or -->
<!-- <button id="hideSelf" onclick='this.hidden = true'>Click to hide the button</button> -->
<br>
<br>
<br>

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 3 - Which handlers run? Which alerts show up? -->
<!--  button.addEventListener("click", () => alert("1"));
      button.removeEventListener("click", () => alert("1"));
      button.onclick = () => alert(2); -->

      <!-- 1 and 2 -->

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 4 -->
  <style>
    #field {
      width: 200px;
      height: 150px;
      border: 10px solid black;
      background-color: green;
      overflow: hidden;
      position: relative;
    }
    #ball {
       position: absolute;
       left: 0;
       top: 0;
       transition: 2s all;
    }
  </style>
</head>

<body style="height:2000px">

  <div id="field">
    <img src="https://en.js.cx/clipart/ball.svg" id="ball">
  </div>

<script>
  field.onclick = function (event) {
    
   let fieldCoords = this.getBoundingClientRect();
    let x = event.clientX - fieldCoords.left - field.clientLeft - ball.offsetWidth/2;
    let y = event.clientY - fieldCoords.top - field.clientTop - ball.offsetWidth/2;
    

    ball.style.left = x + 'px';
    ball.style.top = y + 'px';

  }
  
  
</script>
<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 5 -->

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 6 -->

<!------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- TASK 7 -->
